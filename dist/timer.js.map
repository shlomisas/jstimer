{"version":3,"sources":["timer.js"],"names":["Timer","constructor","interval","times","_interval","_times","_localInterval","_ticks","start","_timerId","add","tick","portion","emit","finished","done","event","stop","remove"],"mappings":";;;;;;AAIA;;;;AAEA;;;;;;AANA;;;;AAQe,MAAMA,KAAN,0BAAgC;;AAQ3CC,gBAAYC,QAAZ,EAAsBC,QAAQ,CAAC,CAA/B,EAAkC;AAC9B;;AAEA,aAAKC,SAAL,GAAiBF,QAAjB;AACA,aAAKG,MAAL,GAAcF,KAAd;;AAEA,aAAKG,cAAL,GAAsB,CAAtB;AACA,aAAKC,MAAL,GAAc,CAAd;AACH;;AAEDC,YAAO;AACH,aAAKC,QAAL,GAAgB,kBAAQC,GAAR,CAAY,IAAZ,CAAhB;AACH;;AAEDC,SAAKC,OAAL,EAAa;;AAET,aAAKN,cAAL,IAAuBM,OAAvB;;AAEA,YAAG,KAAKN,cAAL,GAAsB,KAAKF,SAA9B,EAAwC;AACpC,iBAAKE,cAAL,GAAsB,CAAtB;AACA,iBAAKC,MAAL;AACA,iBAAKM,IAAL,CAAU,MAAV,EAAkB,IAAlB;AACH;AACJ;;AAEDC,eAAU;AACN,eAAO,KAAKT,MAAL,KAAgB,CAAC,CAAjB,IAAsB,KAAKE,MAAL,IAAe,KAAKF,MAAjD;AACH;;AAEDU,SAAKC,QAAQ,MAAb,EAAoB;AAChB,aAAKH,IAAL,CAAUG,KAAV,EAAiB,IAAjB;AACH;;AAEDC,WAAM;AACF,YAAG,KAAKR,QAAR,EAAiB;AACb,8BAAQS,MAAR,CAAe,KAAKT,QAApB,EAA8B,SAA9B;AACH;AACJ;;AA7C0C;kBAA1BT,K","file":"timer.js","sourcesContent":["/**\r\n * Created by Shlomi\r\n */\r\n\r\nimport EventEmitter from 'events';\r\n\r\nimport manager from './manager';\r\n\r\nexport default class Timer extends EventEmitter{\r\n\r\n    _interval;\r\n    _localInterval;\r\n    _times;\r\n    _ticks;\r\n    _timerId;\r\n\r\n    constructor(interval, times = -1) {\r\n        super();\r\n\r\n        this._interval = interval;\r\n        this._times = times;\r\n\r\n        this._localInterval = 0;\r\n        this._ticks = 0;\r\n    }\r\n\r\n    start(){\r\n        this._timerId = manager.add(this);\r\n    }\r\n\r\n    tick(portion){\r\n\r\n        this._localInterval += portion;\r\n\r\n        if(this._localInterval > this._interval){\r\n            this._localInterval = 0;\r\n            this._ticks++;\r\n            this.emit('tick', this);\r\n        }\r\n    }\r\n\r\n    finished(){\r\n        return this._times !== -1 && this._ticks >= this._times;\r\n    }\r\n\r\n    done(event = 'done'){\r\n        this.emit(event, this);\r\n    }\r\n\r\n    stop(){\r\n        if(this._timerId){\r\n            manager.remove(this._timerId, 'stopped');\r\n        }\r\n    }\r\n\r\n}"]}